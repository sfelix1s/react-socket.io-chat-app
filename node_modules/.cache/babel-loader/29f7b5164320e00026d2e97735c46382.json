{"ast":null,"code":"var _jsxFileName = \"/home/nurha/socket-react-chat/src/components/chat.js\";\nimport React, { Component } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Home from '../views/home';\nimport io from 'socket.io-client';\nimport home from '../views/home';\nimport { flexbox } from '@material-ui/system';\nconst socket = io('http://localhost:8000', {\n  transports: ['websocket']\n});\nexport default class extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      endpoint: 'http://localhost:8000/',\n      name: JSON.parse(window.localStorage.getItem('name')),\n      messages: [{\n        name: 'coll',\n        message: 'hello!',\n        timestamp: new Date().toISOString()\n      }],\n      newMessage: ''\n    };\n\n    this.componentDidMount = () => {\n      socket.on('chat', message => {\n        this.setState(prevState => {\n          let messages = prevState.messages;\n          console.log('prevState.messages', messages);\n          messages.push(message);\n        }, {\n          message: messages\n        });\n      });\n    };\n\n    this.componentWillUnmount = () => {\n      socket.close();\n    };\n\n    this.componentDidUpdate = prevState => {\n      socket.on('chat', message => {\n        console.log('##### message', message);\n        this.setState(prevState => {\n          let messages = prevState.messages;\n          console.log('prevState.messages', messages);\n          messages.push(message);\n          this.setMessages(messages); // {\n          //   messages: messages\n          // }\n        });\n      });\n    };\n\n    this.handleSubmitName = name => {\n      this.setState({\n        name: name\n      });\n    };\n\n    this.handleSubmitMasseges = e => {\n      e.preventDefault();\n      socket.emit('chat', {\n        name: this.state.name,\n        message: this.state.newMessage,\n        timestamp: new Date().toISOString()\n      });\n      this.setState({\n        newMessage: ''\n      });\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          open = _this$state.open,\n          name = _this$state.name,\n          messages = _this$state.messages,\n          newMessage = _this$state.newMessage;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      style: {\n        height: '300px',\n        top: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, messages.map((message, key) => React.createElement(\"tr\", {\n      key: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, message.name, \":\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, message.message), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, message.timestamp))))), React.createElement(\"div\", {\n      style: {\n        display: flexbox,\n        bottom: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      id: \"outlined-full-width\",\n      label: \"Chat\",\n      style: {\n        top: 10,\n        left: 2,\n        right: 2,\n        width: '85%'\n      },\n      placeholder: \"write message\",\n      fullWidth: true,\n      margin: \"normal\",\n      variant: \"outlined\",\n      value: newMessage,\n      onChange: e => {\n        this.setState({\n          newMessage: e.target.value\n        });\n      },\n      InputLabelProps: {\n        shrink: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Button, {\n      style: {\n        width: '12%',\n        top: 26,\n        left: 4\n      },\n      size: \"large\",\n      variant: \"outlined\",\n      onClick: this.handleSubmitMasseges,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"submit\")));\n  }\n\n}","map":{"version":3,"sources":["/home/nurha/socket-react-chat/src/components/chat.js"],"names":["React","Component","AppBar","Toolbar","MenuIcon","List","ListItem","ListItemText","TextField","Button","Paper","Home","io","home","flexbox","socket","transports","state","endpoint","name","JSON","parse","window","localStorage","getItem","messages","message","timestamp","Date","toISOString","newMessage","componentDidMount","on","setState","prevState","console","log","push","componentWillUnmount","close","componentDidUpdate","setMessages","handleSubmitName","handleSubmitMasseges","e","preventDefault","emit","render","open","height","top","map","key","display","bottom","left","right","width","target","value","shrink"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Home from '../views/home'\nimport io from 'socket.io-client';\nimport home from '../views/home';\nimport { flexbox } from '@material-ui/system';\nconst socket = io('http://localhost:8000',{ transports: ['websocket'] });\n\nexport default class extends Component {\n    state = {\n        endpoint: 'http://localhost:8000/',\n        name : JSON.parse(window.localStorage.getItem('name')),\n        messages: [{name:'coll',\n                    message:'hello!',\n                    timestamp: new Date().toISOString()\n\n                    }],\n        newMessage: ''\n    }\n   \n\n    componentDidMount = () =>  {\n        socket.on('chat', message => {\n          \n    \n\n    this.setState(\n        (prevState) => {\n            let messages = prevState.messages\n            console.log('prevState.messages', messages)\n             messages.push(message)\n            \n        },{\n            message:messages\n\n        })\n    })\n}\n    componentWillUnmount = ()  => {\n        socket.close()\n    }\n    // setMessages = (msgs) => {\n    //     this.setState( \n    //         {\n    //            messages: msgs\n    //         })\n    //     }\n    componentDidUpdate  = (prevState) => {\n\n        socket.on('chat', message => {\n          \n            console.log('##### message', message)\n           this.setState((prevState) => {\n              let messages = prevState.messages\n              console.log('prevState.messages', messages)\n               messages.push(message)\n               this.setMessages(messages)\n               \n              // {\n              //   messages: messages\n              // }\n            })\n          })\n\n    }\n\n    handleSubmitName = (name) => {\n        this.setState({name:name})\n    }\n    handleSubmitMasseges = (e) => {\n        e.preventDefault()\n        socket.emit('chat', {\n            name:this.state.name,\n            message: this.state.newMessage,\n            timestamp: new Date().toISOString()\n\n        })\n        \n        this.setState({\n            newMessage:''\n        })\n        \n    }\n    render() {\n        const {open, name, messages, newMessage} = this.state;\n\n        return (\n            <div>\n                <table style={{height:'300px',top: 'auto',}}>\n                    <tbody>\n                 {\n                     messages.map((message, key) => \n                         <tr key={key}>\n                             <td>{message.name}:</td>\n                             <td>{message.message}</td>\n                             <td>{message.timestamp}</td>\n                         </tr>\n                     \n                 )}\n                    </tbody>\n                 \n                </table>\n                <div style={{display:flexbox,bottom:0}}\n                    \n                    >\n                {/* <div style={{width:'50%'}}> */}\n                <TextField\n                    id=\"outlined-full-width\"\n                    label=\"Chat\"\n                    style={{ top: 10, left:2, right:2, width:'85%'}}\n                    placeholder=\"write message\"\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    value={newMessage}\n                    onChange={(e)=>{\n                        this.setState({newMessage:e.target.value})\n                    }}\n                    InputLabelProps={{\n                    shrink: true,\n                    }}\n                    \n                >\n                    \n                   \n                  \n                </TextField>\n                {/* </div> */}\n                \n                <Button \n                    style={{width:'12%', top:26, left:4}}\n                    size=\"large\"\n                    variant=\"outlined\"\n                    onClick={this.handleSubmitMasseges}\n                    >\n                    submit\n                </Button>\n               \n                \n                </div>\n                \n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}